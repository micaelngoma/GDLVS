<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Firestore Connection Test</title>
  <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-firestore.js"></script>
</head>
<body>
  <h1>Firestore Communication Test</h1>
  <button onclick="writeTestData()">Write Test Data</button>
  <button onclick="readTestData()">Read Test Data</button>

  <div id="output" style="margin-top:20px; font-family:monospace; color:green;"></div>

  <script>
    // === Firebase Setup (same config as your project) ===
    var firebaseConfig = {
      apiKey: "AIzaSyBiZN1G3ShoDOcPLe-bUILNf90NpdcCu6k",
      authDomain: "gdlvs-2348e.firebaseapp.com",
      projectId: "gdlvs-2348e",
      storageBucket: "gdlvs-2348e.appspot.com",
      messagingSenderId: "358715790318",
      appId: "1:358715790318:web:9d4c85e0f71222cf1b34ff"
    };
    if (!firebase.apps.length) firebase.initializeApp(firebaseConfig);
    const db = firebase.firestore();

    // === Write test data ===
    function writeTestData() {
      db.collection("test").doc("githubConnection").set({
        message: "Hello from GitHub Pages!",
        timestamp: firebase.firestore.FieldValue.serverTimestamp()
      })
      .then(() => {
        document.getElementById("output").innerText = "‚úÖ Successfully wrote test data!";
      })
      .catch((error) => {
        document.getElementById("output").innerText = "‚ùå Error writing: " + error;
      });
    }

    // === Read test data ===
    function readTestData() {
      db.collection("test").doc("githubConnection").get()
      .then((doc) => {
        if (doc.exists) {
          document.getElementById("output").innerText =
            "üìÑ Read from Firestore:\n" + JSON.stringify(doc.data(), null, 2);
        } else {
          document.getElementById("output").innerText = "‚ö†Ô∏è No test document found.";
        }
      })
      .catch((error) => {
        document.getElementById("output").innerText = "‚ùå Error reading: " + error;
      });
    }
  </script>
</body>
</html>
